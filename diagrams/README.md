# Smart Voting App - Detailed Technical Documentation

This directory contains advanced technical diagrams and analysis for the Smart Voting Platform, based on a deep code inspection of the project.

## ðŸš€ 1. Project Flow Chart
**File:** `project_flow_chart.png`

**Code Logic Analysis:**
The flow chart maps the exact user journey found in the source code:
- **SplashActivity**: Automatically fades into Login after 2.5s.
- **LoginActivity**: 
  - **Voter Path**: Users enter Aadhaar/DOB -> Code validates against `aadhaar_data.json` -> Generates OTP -> OTP Notification -> Verify -> `MainActivity`.
  - **Admin Path**: Link to `GovernmentLoginActivity` -> Validates against `gov_login_data.json` -> `AdminDashboardActivity`.
- **Main Flow (Voter)**:
  - `MainActivity` loads user data via Intent extras.
  - **Vote Fragment**: Lists elections from `ElectionManager`. Checks eligibility using `UserUtils` (Age & State matching).
  - **Voting Activity**: Loads options from `VotingOptionManager`. Prevents duplicate votes via `VoteManager` (Checks `votes.json`). Saves `VoteRecord` with timestamp.

---

## ðŸ—ï¸ 2. System Architecture (Revised)
**File:** `system_architecture_diagram_v2.png`

**Architecture Analysis:**
The app follows a **Model-View-Manager** pattern (variation of MVC) without a centralized database logic, relying on JSON file persistence.

- **Presentation Layer (UI)**:
  - **Activities**: `VotingActivity` is the core interaction point. `MainActivity` acts as the voter container.
  - **Fragments**: `ListFragment` displays Parties (Grid), `VoteFragment` displays Elections (List).
- **Business Logic Layer**:
  - **Managers**: 
    - `VoteManager`: Handles `VoteRecord` creation and duplicate checks.
    - `ElectionManager`: Reads `elections.json`.
    - `PartyManager`: Maps party details to candidates.
    - `NotificationsHelper`: Manages local notifications.
  - **Logic**: `VoteFragment` contains the core eligibility logic (Age >= 18, State match).
- **Data Layer (JSON Persistence)**:
  - The app uses **Internal File Storage** for write operations: `votes.json`, `feedback.json`.
  - **Assets** are used for read-only auth data: `aadhaar_data.json`, `gov_login_data.json`.

---

## ðŸ‘¥ 3. Use Case Diagram (Detailed)
**File:** `use_case_diagram_v2.png`

**Actor Analysis:**
- **Voter**: authenticated via Aadhaar+OTP. Key actions: "Cast Vote" (dependent on Eligibility Check), "View History", "Search Parties".
- **Admin**: authenticated via DeptCode. Key actions: "Manage Elections" (CRUD), "View Results" (Aggregation of `VoteRecords`).

**Notable Relationships**:
- "Login" uses "OTP Verification" (Voter only).
- "Cast Vote" *includes* "Check Eligibility".
- "View Results" *depends on* "Vote Aggregation".

---

## ðŸ§© 4. UML Class Structure (Code-Level)
*(Note: Diagram based on `app/src/main/java/...` analysis)*

**Core Entity Classes**:
1. **User**:
   - Fields: `aadhaarId`, `name`, `dob`, `state`, `eligible` (boolean).
   - Usage: Passed between activities via Intent Extras.
2. **Election**:
   - Fields: `id` (int), `title`, `state`, `minAge` (int), `status`, `stopDate`.
   - Usage: `ElectionAdapter` binds this to RecyclerView.
3. **VoteRecord** (Critical):
   - Fields: `aadhaarId` (String), `electionId` (int), `optionId` (String), `timestamp` (long).
   - **Note**: The code uses `VoteRecord` to store votes, not `Vote`. This ensures minimal data storage.
4. **VotingOption**:
   - Fields: `id`, `optionName`, `description`, `logoPath`.
   - Relation: Linked to `Election` by `electionId`.
5. **Party**:
   - Fields: `name`, `symbol`, `logoPath`.
   - Usage: Displayed in `ListFragment` grid.

**Manager Classes**:
- **VoteManager**:
  - `hasUserVoted(aadhaar, electionId)`: Scans `votes.json`.
  - `recordVote(voteRecord)`: Appends to JSON array.
- **ElectionManager**:
  - `getAllElections()`: Parses `elections.json`.

---

## ðŸ“‚ File Locations

- **Diagrams**: `/Users/naveennavi/Desktop/projects/SmartVotingApp/diagrams/`
- **Source Code**: `/app/src/main/java/com/example/smartvotingapp/`

*Documentation generated by Antigravity based on real-time code analysis.*
